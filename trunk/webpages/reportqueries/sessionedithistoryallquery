TITLE='Session Edit History Report - All'
DESCRIPTION='For each session, show the entire edit history.'
PROGWANTS=1
EVENTSWANTS=1
QUERY="
SELECT
        concat('<a href=StaffAssignParticipants.php?selsess=',S.sessionid,'>',
             S.sessionid,'</a>') as Sessionid,
        T.trackname as 'Track', 
        concat('<a href=EditSession.php?id=',S.sessionid,'>',S.title,'</a>') Title,
        SS.statusname as 'Current<BR>Status', 
        timestamp as 'When', 
        concat(name,' (', email_address,') ') as 'Who', 
        SEC.description as 'What',
	    ifnull(SEH.editdescription,'&nbsp;') as 'Notes'
    FROM
        Sessions S JOIN 
        Tracks T USING (trackid) JOIN
        SessionEditHistory SEH USING (sessionid) JOIN
        SessionEditCodes SEC USING (sessioneditcode) JOIN
        SessionStatuses SS ON SS.statusid=SEH.statusid
    WHERE
        S.statusid >= 1 AND
        S.statusid <= 7
    ORDER BY
        S.sessionid, SEH.timestamp;"
