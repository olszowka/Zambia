TITLE='Conflict Report - Participant Double Booked'
DESCRIPTION='Find all instances where a participant is scheduled to be in two or more places at once'
QUERY="SELECT badgeid, TA.trackname as 'Track A', RA.roomname as 'Room A', Asess as 'Session ID A', DATE_FORMAT(ADDTIME('2008-01-18 00:00:00',Astart),'%a %l:%i %p') as 'Start Time A', TB.trackname as 'Track B', RB.roomname as 'Room B', Bsess as 'Session ID B', DATE_FORMAT(ADDTIME('2008-01-18 00:00:00',Bstart),'%a %l:%i %p') as 'Start Time B' FROM Rooms RA, Rooms RB, Tracks TA, Tracks TB, (SELECT POSA.badgeid, SCHA.roomid AS Aroom, SCHA.sessionid AS Asess, SCHA.starttime AS Astart, ADDTIME(SCHA.starttime, SA.duration) AS Aend, SA.trackid AS Atrack, SCHB.sessionid AS Bsess, SCHB.roomid AS Broom, SCHB.starttime AS Bstart, ADDTIME(SCHB.starttime, SB.duration) AS Bend, SB.trackid AS Btrack FROM ParticipantOnSession POSA, ParticipantOnSession POSB, Schedule SCHA, Schedule SCHB, Sessions SA, Sessions SB where POSA.sessionid = SA.sessionid and SCHA.sessionid=POSA.sessionid and POSB.sessionid = SB.sessionid and SCHB.sessionid=POSB.sessionid and POSA.badgeid=POSB.badgeid and (SCHA.starttime<SCHB.starttime or (SCHA.starttime=SCHB.starttime and SCHA.sessionid<SCHB.sessionid)) and ADDTIME(SCHA.starttime, SA.duration)>SCHB.starttime and POSA.sessionid<>POSB.sessionid) as Foo where Aroom=RA.roomid and Broom=RB.roomid and TA.trackid=Atrack and TB.trackid=Btrack order by cast(badgeid as unsigned), Astart"

