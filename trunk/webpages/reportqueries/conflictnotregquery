TITLE='Conflict Report - Not Registered'
DESCRIPTION='This is a report of participants sorted by number of panels they are on that are actually running, with some registration information.  It is useful for cons that comp program participants based on a minimum number of panels.  In this case, this report helps make sure people get their comps.  Also, participants who have not earned a comp may need some kind of consideration.'
CONFLICTWANTS=1
REGWANTS=1
QUERY="
  select P.badgeid, 
         P.pubsname, 
	 if ((regtype is NULL), ' ', regtype) as 'regtype', 
	 if ((assigned is NULL), '0', assigned) as 'assigned'
    from Participants P, 
         CongoDump C 
         left join (  select POS.badgeid, 
                             count(POS.sessionid) as assigned 
                        from ParticipantOnSession POS,
                             Schedule S
                       where S.sessionid=POS.sessionid 
                    group by badgeid) X 
                on P.badgeid=X.badgeid 
   where C.badgeid=P.badgeid 
     and interested!=2 
order by regtype, 
         cast(assigned as unsigned) desc,
          substring_index(pubsname,' ',-1);"
