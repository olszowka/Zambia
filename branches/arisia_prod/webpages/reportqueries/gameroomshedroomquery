TITLE='Gaming Schedule'
DESCRIPTION='All Gaming and Gaming Panels.  All these reports include both.'
GAMINGWANTS=1
QUERY="
SELECT
        roomname as 'Room',
        DATE_FORMAT(ADDTIME('2009-01-16 00:00:00',starttime),'%a %l:%i %p') as 'Start Time',
        concat( if(left(duration,2)=00, '', if(left(duration,1)=0, concat(right(left(duration,2),1),'hr '),
            concat(left(duration,2),'hr '))), if(date_format(duration,'%i')=00, '', if(left(date_format(duration,'%i'),1)=0,
            concat(right(date_format(duration,'%i'),1),'min'), concat(date_format(duration,'%i'),'min')))) Duration,
        title as 'Title',
        pocketprogtext as Description,
        group_concat(' ',pubsname,' (',P.badgeid,')') as 'Participants'
    FROM
             Schedule SCH
        JOIN Sessions S
             USING (sessionid)
        JOIN Rooms R
             USING (roomid)
        JOIN Tracks
             USING (trackid)
   LEFT JOIN ParticipantOnSession POS
             ON SCH.sessionid=POS.sessionid
   LEFT JOIN Participants P
             ON POS.badgeid=P.badgeid
    WHERE 
        trackname in ('Gaming')
    GROUP BY SCH.scheduleid
    ORDER BY R.roomname, SCH.starttime;"
