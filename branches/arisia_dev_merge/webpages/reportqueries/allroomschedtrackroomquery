TITLE='Full Room Schedule by track then room then time'
DESCRIPTION='Lists all Sessions Scheduled in all Rooms.'
PROGWANTS=1
EVENTSWANTS=1
GOHWANTS=1
QUERY="
select
        Trackname,
        concat('<a href=MaintainRoomSched.php?selroom=',R.roomid,'>', R.roomname,'</a>') as Roomname,
        Function,
        DATE_FORMAT(ADDTIME('2011-01-14 00:00:00',starttime),'%a %l:%i %p') as 'Start Time',
        Duration,
        concat('<a href=StaffAssignParticipants.php?selsess=',S.sessionid,'>',
                S.sessionid,'</a>') as Sessionid,
        concat('<a href=EditSession.php?id=',S.sessionid,'>',S.title,'</a>') Title,
        group_concat(' ',pubsname,' (',P.badgeid,')') as 'Participants'
    from
             Schedule SCH
        JOIN Sessions S
             USING (sessionid)
        JOIN Rooms R
             USING (roomid)
   LEFT JOIN ParticipantOnSession POS
             ON SCH.sessionid=POS.sessionid
   LEFT JOIN Participants P
             ON POS.badgeid=P.badgeid
   LEFT JOIN Tracks T
             ON T.trackid=S.trackid
    group by SCH.scheduleid
    order by T.trackname, R.roomname, SCH.starttime;"
