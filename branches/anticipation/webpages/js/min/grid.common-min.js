var showModal=function(a){a.w.show()};var closeModal=function(a){a.w.hide();if(a.o){a.o.remove()}};function createModal(i,d,a,j,l,k){var f=a.imgpath?a.imgpath+a.closeicon:a.closeicon;var h=document.createElement("div");jQuery(h).addClass("modalwin").attr("id",i.themodal);var c=jQuery('<div id="'+i.modalhead+'"><table width="100%"><tbody><tr><td class="modaltext">'+a.caption+'</td> <td style="text-align:right" ><a href="javascript:void(0);" class="jqmClose">'+(f!=""?'<img src="'+f+'" border="0"/>':"X")+"</a></td></tr></tbody></table> </div>").addClass("modalhead");var g=document.createElement("div");jQuery(g).addClass("modalcontent").attr("id",i.modalcontent).css("width","97%");jQuery(g).append(d);h.appendChild(g);var b=document.createElement("div");jQuery(b).addClass("loading").html(a.processData||"");jQuery(h).prepend(b);jQuery(h).prepend(c);jQuery(h).addClass("jqmWindow");if(a.drag){jQuery(h).append("<img  class='jqResize' src='"+a.imgpath+"resize.gif'/>")}if(k===true){jQuery("body").append(h)}else{jQuery(h).insertBefore(j)}if(a.left==0&&a.top==0){var e=[];e=findPos(l);a.left=e[0]+4;a.top=e[1]+4}if(a.width==0||!a.width){a.width=300}if(a.height==0||!a.width){a.height=200}if(!a.zIndex){a.zIndex=950}jQuery(h).css({top:a.top+"px",left:a.left+"px",width:a.width+"px",height:a.height+"px",zIndex:a.zIndex}).attr({tabIndex:"-1"});if(a.closeOnEscape&&a.closeOnEscape===true){jQuery(h).keydown(function(m){if(m.which==27){hideModal(this)}})}return false}function viewModal(a,b){b=jQuery.extend({toTop:true,overlay:10,modal:false,onShow:showModal,onHide:closeModal},b||{});jQuery(a).jqm(b).jqmShow();return false}function hideModal(a){jQuery(a).jqmHide()}function DnRModal(a,b){jQuery(b).css("cursor","move");jQuery(a).jqDrag(b).jqResize(".jqResize");return false}function info_dialog(b,e,c,a){var d="<div id='info_id'>";d+="<div align='center'><br />"+e+"<br /><br />";d+="<input type='button' size='10' id='closedialog' class='jqmClose EditButton' value='"+c+"' />";d+="</div></div>";createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content"},d,{width:290,height:120,drag:false,caption:"<b>"+b+"</b>",imgpath:a,closeicon:"ico-close.gif",left:250,top:170,closeOnEscape:true},"","",true);viewModal("#info_dialog",{onShow:function(f){f.w.show()},onHide:function(f){f.w.hide().remove();if(f.o){f.o.remove()}},modal:true})}function findPos(a){var b=curtop=0;if(a.offsetParent){do{b+=a.offsetLeft;curtop+=a.offsetTop}while(a=a.offsetParent)}return[b,curtop]}function isArray(a){if(a.constructor.toString().indexOf("Array")==-1){return false}else{return true}}function createEl(g,n,e){var f="";switch(g){case"textarea":f=document.createElement("textarea");if(!n.cols){jQuery(f).css("width","98%")}jQuery(f).attr(n);if(e=="&nbsp;"||e=="&#160;"||(e.length==1&&e.charCodeAt(0)==160)){e=""}jQuery(f).val(e);break;case"checkbox":f=document.createElement("input");f.type="checkbox";jQuery(f).attr({id:n.id,name:n.name});if(!n.value){e=e.toLowerCase();if(e.search(/(false|0|no|off|undefined)/i)<0&&e!==""){f.checked=true;f.defaultChecked=true;f.value=e}else{f.value="on"}jQuery(f).attr("offval","off")}else{var a=n.value.split(":");if(e==a[0]){f.checked=true;f.defaultChecked=true}f.value=a[0];jQuery(f).attr("offval",a[1])}break;case"select":e=jQuery.htmlDecode(e);f=document.createElement("select");var m=n.multiple==true?true:false;if(n.value){var h=[];if(m){jQuery(f).attr({multiple:"multiple"});h=e.split(",");h=jQuery.map(h,function(i){return jQuery.trim(i)})}if(typeof n.size==="undefined"){n.size=1}if(typeof n.value=="string"){var c=n.value.split(";"),l,d;jQuery(f).attr({id:n.id,name:n.name,size:Math.min(n.size,c.length)});for(var j=0;j<c.length;j++){l=c[j].split(":");d=document.createElement("option");d.value=l[0];d.innerHTML=l[1];if(!m&&l[1]==e){d.selected="selected"}if(m&&jQuery.inArray(jQuery.trim(l[1]),h)>-1){d.selected="selected"}f.appendChild(d)}}else{if(typeof n.value=="object"){var b=n.value;var j=0;for(var k in b){j++;d=document.createElement("option");d.value=k;d.innerHTML=b[k];if(!m&&b[k]==e){d.selected="selected"}if(m&&jQuery.inArray(jQuery.trim(b[k]),h)>-1){d.selected="selected"}f.appendChild(d)}jQuery(f).attr({id:n.id,name:n.name,size:Math.min(n.size,j)})}}}break;case"text":f=document.createElement("input");f.type="text";e=jQuery.htmlDecode(e);f.value=e;if(!n.size){jQuery(f).css({width:"98%"})}jQuery(f).attr(n);break;case"password":f=document.createElement("input");f.type="password";e=jQuery.htmlDecode(e);f.value=e;if(!n.size){jQuery(f).css("width","98%")}jQuery(f).attr(n);break;case"image":f=document.createElement("input");f.type="image";jQuery(f).attr(n);break}return f}function checkValues(f,b,d){if(b>=0){var e=d.p.colModel[b].editrules}if(e){if(e.required===true){if(f.match(/^s+$/)||f==""){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.required,""]}}var h=e.required===false?false:true;if(e.number===true){if(!(h===false&&isEmpty(f))){if(isNaN(f)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.number,""]}}}if(e.minValue&&!isNaN(e.minValue)){if(parseFloat(f)<parseFloat(e.minValue)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.minValue+" "+e.minValue,""]}}if(e.maxValue&&!isNaN(e.maxValue)){if(parseFloat(f)>parseFloat(e.maxValue)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.maxValue+" "+e.maxValue,""]}}if(e.email===true){if(!(h===false&&isEmpty(f))){var a=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!a.test(f)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.email,""]}}}if(e.integer===true){if(!(h===false&&isEmpty(f))){if(isNaN(f)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.integer,""]}if((f%1!=0)||(f.indexOf(".")!=-1)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.integer,""]}}}if(e.date===true){if(!(h===false&&isEmpty(f))){var c=d.p.colModel[b].datefmt||"Y-m-d";if(!checkDate(c,f)){return[false,d.p.colNames[b]+": "+jQuery.jgrid.edit.msg.date+" - "+c,""]}}}}return[true,"",""]}function checkDate(l,c){var e={};var o=false;var n;l=l.toLowerCase();if(l.indexOf("/")!=-1){n="/"}else{if(l.indexOf("-")!=-1){n="-"}else{if(l.indexOf(".")!=-1){n="."}else{n="/"}}}l=l.split(n);c=c.split(n);if(c.length!=3){return false}var f=-1,m,g=-1,d=-1;for(var h=0;h<l.length;h++){var b=isNaN(c[h])?0:parseInt(c[h],10);e[l[h]]=b;m=l[h];if(m.indexOf("y")!=-1){f=h}if(m.indexOf("m")!=-1){d=h}if(m.indexOf("d")!=-1){g=h}}if(l[f]=="y"||l[f]=="yyyy"){m=4}else{if(l[f]=="yy"){m=2}else{m=-1}}var a=DaysArray(12);var k;if(f===-1){return false}else{k=e[l[f]].toString();if(m==2&&k.length==1){m=1}if(k.length!=m||e[l[f]]==0){return false}}if(d===-1){return false}else{k=e[l[d]].toString();if(k.length<1||e[l[d]]<1||e[l[d]]>12){return false}}if(g===-1){return false}else{k=e[l[g]].toString();if(k.length<1||e[l[g]]<1||e[l[g]]>31||(e[l[d]]==2&&e[l[g]]>daysInFebruary(e[l[f]]))||e[l[g]]>a[e[l[d]]]){return false}}return true}function daysInFebruary(a){return(((a%4==0)&&((!(a%100==0))||(a%400==0)))?29:28)}function DaysArray(b){for(var a=1;a<=b;a++){this[a]=31;if(a==4||a==6||a==9||a==11){this[a]=30}if(a==2){this[a]=29}}return this}function isEmpty(a){if(a.match(/^s+$/)||a==""){return true}else{return false}}function htmlEncode(a){return !a?a:String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};