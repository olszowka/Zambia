TITLE='Session Interest Report (counts)'
DESCRIPTION='For each session, show number of participants who have put it on their interest list. (Excludes invited guest sessions.)'
PROGWANTS=1
QUERY="
SELECT
        T.trackname as Track, 
        concat('<a href=StaffAssignParticipants.php?selsess=',S.sessionid,'>',
        S.sessionid,'</a>') as 'Session<BR>ID',
        concat('<a href=EditSession.php?id=',S.sessionid,'>',S.title,'</a>') Title,
        count(PSI.badgeid) as 'Number<BR>of<BR>Participants' 
    FROM
             Sessions S 
        JOIN Tracks T USING (trackid)
        JOIN Types Ty USING (typeid)
   LEFT JOIN ParticipantSessionInterest PSI USING (sessionid)
    WHERE
            T.selfselect = 1
        AND Ty.selfselect = 1
        AND S.invitedguest = 0
        AND S.statusid IN (2,3,7)
    GROUP BY
        S.sessionid 
    ORDER BY
        T.display_order, 
        S.sessionid;"
